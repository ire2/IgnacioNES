# IgnacioNES - Work-in-Progress NES Emulator

IgnacioNES is a work-in-progress NES emulator built with Swift, designed to run NES games on macOS. It simulates the hardware of the Nintendo Entertainment System (NES), including the CPU, PPU, APU, and controller input, allowing you to load and play NES games. This project utilizes Metal for graphical rendering and AudioQueue for sound processing.

## Features

- **CPU Emulation**: Emulates the 6502 CPU with support for basic instructions, memory access, and the stack.
- **PPU (Picture Processing Unit)**: Renders graphics, simulating the NES’s video output with Metal for high performance rendering.
- **APU (Audio Processing Unit)**: Basic audio playback using AudioQueue for sound generation.
- **Memory**: Memory is separated between CPU and PPU, simulating the 2KB of RAM and ROM mapping of the NES.
- **ROM Loading**: Supports loading NES ROM files and interpreting them to run NES games.
- **Main Loop**: A loop that simulates the passage of time in the NES, stepping through the CPU and PPU cycles.
- **Controller Support**: Inputs are read using `MacControllerIO`, simulating NES controller interactions.

## Requirements

- macOS 10.15 or higher
- Xcode 12.0 or later
- Swift 5.0 or later

## Installation

1. Clone the repository:

 ```bash
   git clone https://github.com/yourusername/IgnacioNES.git
 ```
2.	Open the project in Xcode:

```bash
open IgnacioNES.xcodeproj
```
3.	Build and run the project within Xcode.

## Usage

### Loading a ROM

To load an NES game ROM, follow these steps:
	1.	Run the app.
	2.	Use the “Open ROM” option in the file menu to load a .nes file.
	3.	The emulator will initialize the game and load it into memory.
	4.	You can press Play/Pause to start or pause the emulation.
	5.	Controller inputs are handled by MacControllerIO, mapped to standard NES controls (use keyboard or connected gamepads).

### Frame Scaling

Use the Render Scale option in the menu to change the resolution scale of the rendered NES graphics.

### Audio

Sound is emulated through the APU. If there are any audio issues, check your system’s audio settings.

## Project Structure

### Core Components
- **CPU.swift:** Emulates the 6502 CPU, handling opcodes, memory, and the stack.
- **PPU.swift:** Emulates the Picture Processing Unit (PPU), rendering the game’s graphics to the screen using Metal.
- **APU.swift:** Emulates the Audio Processing Unit (APU), managing the sound playback.
- **CPUMemory.swift:** Handles the CPU’s memory, including RAM and PRG ROM mapping.
- **PPUMemory.swift: **Handles the PPU’s memory, simulating video memory.
- **Cartridge.swift:** Handles loading and parsing of NES ROM files (PRG and CHR data).
- M**ainLoop.swift:** Manages the main emulator loop, stepping the CPU and PPU in sync.

### Audio Integration
- **AudioQueue**: Emulates the NES audio through the AudioQueue API, buffering sound data generated by the APU.

## To-Do
- Complete PPU rendering features, including full tile and sprite rendering.
- Add support for saving and loading game states.
- Implement full APU sound processing for accurate audio emulation.
- Improve controller input handling and add support for multiple gamepads.
- Optimize performance for smoother emulation.

## Contributing

If you’d like to contribute to IgnacioNES, feel free to fork the repository and submit pull requests. Contributions to performance optimizations, new features, and bug fixes are welcome.

### How to contribute:
1.	Fork the repository.
2.	Create a new branch for your feature or fix.
3.	 Make changes and commit them.
4.	  Submit a pull request.

## License

This project is licensed under the MIT License - see the LICENSE file for details.

### Acknowledgements
- Swift for being the primary programming language for this project.

